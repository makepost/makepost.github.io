---
title: Чому код змінився
author: makepost
date: 2018-04-18 21:25
template: article.jade
---

Diff показує, що стало інакше в коді, а коментар до коміта пояснює, навіщо. Корисно як іншим розробникам, так зрештою і собі. Розуміти [причину змін](https://chris.beams.io/posts/git-commit/), виконаних кілька місяців чи й років тому, стає не лише можливо, а й просто.

## 50 символів і коментар

Часто вистачає лише заголовка:

```
git commit -m "Інструкція: Виправити опечатку в інтро"
```

Редактор Vim і онлайн-засоби на зразок GitLab попереджають, якщо рекомендований ліміт у 50 символів перевищено. Це ознака недостатньо [атомного](https://www.freshconsulting.com/atomic-commits/) коміта, тобто надто багато змін вносяться разом.

## Компонент: Інфінітив без крапки

Граматично заголовок не потребує розділового знака в кінці. Слід вказувати, в якому [логічному розділі](/articles/vertical-slices/) кодової бази проведена робота, тоді легко фільтрувати коміти.

```
# Не ок
додав про нас

# Ок
Хедер: Додати лінк на блог
```

Інфінітив із великою літерою послідовно використовується в автоматичних повідомленнях:

- Merge branch 'update-md-links' into 'master'

- Release version 1.0.0

## Чому, не як

Деталі правок видні у `git diff`, коментар не має їх дублювати. Коли треба детально пояснити контекст, можна виконати `git commit` без параметра. Редактор дозволить написати заголовок і тіло. Класно робить Philip Chimento у репозиторії [GNOME JavaScript](https://gitlab.gnome.org/GNOME/gjs/commit/65caa0ee3e7a911c058d81a148f03d2624685a59):

```
Valgrind: Оновити патерн ігнору

Пропускає дані, що виглядають подібно до "витоку пам'яті", а насправді є
статичними в Cairo. Не слід викликати cairo_debug_reset_static_data,
оскільки Cairo має здатність робити помилковий assert і зазнавати краху
при завершенні роботи.
```

`git log` показуватиме весь текст, а `git log --oneline` відокремлений заголовок. `git shortlog` групує заголовки за іменем автора.

Навколо мов програмування широко прийняті конвенції з приводу імен, [форматування](/articles/lint-code/) тощо. Щоб орієнтуватися в історії правок було легше, варто дотримувати правил і при збереженні версій.